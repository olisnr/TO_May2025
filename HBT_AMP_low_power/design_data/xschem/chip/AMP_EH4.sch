v {xschem version=3.4.7RC file_version=1.2}
G {}
K {}
V {}
S {}
E {}
L 4 2465 -590 2465 -540 {}
L 4 2485 -590 2485 -540 {}
L 4 2505 -590 2505 -540 {}
L 4 2495 -580 2495 -530 {}
L 4 2475 -580 2475 -530 {}
L 4 2455 -580 2455 -530 {}
L 4 2455 -530 2495 -530 {}
L 4 2465 -590 2505 -590 {}
T {DC Analysis} 2080 -1820 0 0 0.6 0.6 { layer=2}
N 640 -240 720 -240 {
lab=VSS}
N 640 -1200 720 -1200 {
lab=VDD}
N 720 -240 720 -160 {
lab=VSS}
N 720 -1280 720 -1200 {
lab=VDD}
N 1840 -290 1840 -220 {lab=VSS}
N 1900 -370 1900 -320 {lab=#net1}
N 1840 -370 1900 -370 {lab=#net1}
N 1840 -370 1840 -350 {lab=#net1}
N 1600 -720 2320 -720 {lab=ip}
N 1760 -1220 1760 -1150 {lab=VDD}
N 1760 -370 1760 -220 {lab=VSS}
N 1600 -880 1600 -830 {lab=vGND}
N 1680 -880 1760 -880 {lab=vGND}
N 1600 -880 1680 -880 {lab=vGND}
N 1680 -880 1680 -830 {lab=vGND}
N 1680 -770 1680 -640 {lab=in}
N 1680 -640 1960 -640 {lab=in}
N 1440 -640 1680 -640 {lab=in}
N 2320 -720 2320 -640 {lab=ip}
N 2280 -640 2320 -640 {lab=ip}
N 1600 -770 1600 -720 {lab=ip}
N 1440 -720 1600 -720 {lab=ip}
N 1840 -770 1840 -370 {lab=#net1}
N 2000 -960 2090 -960 {lab=#net2}
N 2150 -960 2240 -960 {lab=#net3}
N 2000 -1200 2000 -1150 {lab=VDD}
N 2240 -1200 2240 -1150 {lab=VDD}
N 1840 -1220 1840 -830 {lab=VDD}
N 2040 -370 2120 -370 {lab=#net4}
N 2040 -270 2120 -270 {lab=VSS}
N 2400 -1220 2400 -1070 {lab=VDD}
N 2000 -1040 2360 -1040 {lab=#net2}
N 2000 -1090 2000 -1040 {lab=#net2}
N 2560 -290 2560 -220 {lab=VSS}
N 2550 -290 2560 -290 {lab=VSS}
N 2720 -290 2720 -220 {lab=VSS}
N 2710 -290 2720 -290 {lab=VSS}
N 2400 -290 2400 -220 {lab=VSS}
N 2400 -290 2410 -290 {lab=VSS}
N 2460 -320 2520 -320 {lab=#net5}
N 2460 -370 2460 -320 {lab=#net5}
N 2440 -320 2460 -320 {lab=#net5}
N 2400 -370 2460 -370 {lab=#net5}
N 2560 -370 2560 -350 {lab=#net6}
N 2560 -370 2640 -370 {lab=#net6}
N 2640 -370 2640 -320 {lab=#net6}
N 2640 -320 3080 -320 {lab=#net6}
N 2400 -370 2400 -350 {lab=#net5}
N 2240 -1090 2240 -960 {lab=#net3}
N 2240 -960 2520 -960 {lab=#net3}
N 2560 -1220 2560 -990 {lab=VDD}
N 1760 -1090 1760 -880 {lab=vGND}
N 1760 -880 1760 -430 {lab=vGND}
N 2000 -960 2000 -670 {lab=#net2}
N 2000 -1040 2000 -960 {lab=#net2}
N 2240 -960 2240 -670 {lab=#net3}
N 2000 -610 2000 -590 {lab=#net7}
N 2240 -610 2240 -590 {lab=#net8}
N 2000 -530 2000 -520 {lab=#net4}
N 2120 -520 2240 -520 {lab=#net4}
N 2240 -530 2240 -520 {lab=#net4}
N 2120 -520 2120 -370 {lab=#net4}
N 2000 -520 2120 -520 {lab=#net4}
N 2400 -480 2400 -370 {lab=#net5}
N 2560 -610 2560 -370 {lab=#net6}
N 2400 -800 2400 -670 {lab=#net9}
N 1900 -320 2080 -320 {lab=#net1}
N 1880 -320 1900 -320 {lab=#net1}
N 2400 -480 2480 -480 {lab=#net5}
N 2400 -610 2400 -480 {lab=#net5}
N 2480 -530 2480 -480 {lab=#net5}
N 2480 -690 2480 -590 {lab=#net10}
N 2480 -800 2480 -750 {lab=#net9}
N 2400 -800 2480 -800 {lab=#net9}
N 2040 -290 2040 -270 {lab=VSS}
N 2040 -370 2040 -350 {lab=#net4}
N 2120 -370 2120 -350 {lab=#net4}
N 2120 -270 2120 -220 {lab=VSS}
N 2120 -290 2120 -270 {lab=VSS}
N 1040 -880 1600 -880 {lab=vGND}
N 2720 -480 2720 -350 {lab=op}
N 3120 -480 3200 -480 {lab=op}
N 2400 -1010 2400 -800 {lab=#net9}
N 2560 -690 2560 -670 {lab=#net11}
N 2800 -290 2800 -220 {lab=VSS}
N 2790 -290 2800 -290 {lab=VSS}
N 2880 -290 2880 -220 {lab=VSS}
N 2870 -290 2880 -290 {lab=VSS}
N 2960 -290 2960 -220 {lab=VSS}
N 2950 -290 2960 -290 {lab=VSS}
N 3040 -290 3040 -220 {lab=VSS}
N 3030 -290 3040 -290 {lab=VSS}
N 3120 -290 3120 -220 {lab=VSS}
N 3110 -290 3120 -290 {lab=VSS}
N 2800 -480 2800 -350 {lab=op}
N 2720 -480 2800 -480 {lab=op}
N 2880 -480 2880 -350 {lab=op}
N 2800 -480 2880 -480 {lab=op}
N 2960 -480 2960 -350 {lab=op}
N 3040 -480 3040 -350 {lab=op}
N 2880 -480 2960 -480 {lab=op}
N 2960 -480 3040 -480 {lab=op}
N 3120 -480 3120 -350 {lab=op}
N 3040 -480 3120 -480 {lab=op}
N 2720 -690 2720 -670 {lab=#net11}
N 2560 -690 2720 -690 {lab=#net11}
N 2560 -930 2560 -690 {lab=#net11}
N 2020 -1200 2020 -1190 {lab=VDD}
N 2000 -1200 2020 -1200 {lab=VDD}
N 2000 -1220 2000 -1200 {lab=VDD}
N 2260 -1200 2260 -1180 {lab=VDD}
N 2240 -1200 2260 -1200 {lab=VDD}
N 2240 -1220 2240 -1200 {lab=VDD}
N 1040 -800 1250 -800 {lab=iep}
N 1040 -720 1250 -720 {lab=ihn}
N 1040 -640 1250 -640 {lab=ihp}
N 1040 -560 1250 -560 {lab=ien}
N 1310 -560 1440 -640 {lab=in}
N 1310 -720 1440 -640 {lab=in}
N 1310 -640 1440 -720 {lab=ip}
N 1310 -800 1440 -720 {lab=ip}
C {ipin.sym} 1040 -720 0 0 {name=p3 lab=ihn
}
C {iopin.sym} 640 -240 0 1 {name=p8 lab=VSS

}
C {pwroli.sym} 720 -160 0 0 {name=l1 lab=VSS}
C {iopin.sym} 640 -1200 0 1 {name=p9 lab=VDD}
C {pwroli.sym} 720 -1280 2 0 {name=l5 lab=VDD
}
C {pwroli.sym} 2120 -160 0 0 {name=l3 lab=VSS}
C {ammeter.sym} 2120 -190 0 0 {name=Vmeas8 savecurrent=true
lvs_ignore=short}
C {launcher.sym} 640 -720 0 0 {name=h1
descr="write LVS netlist"
tclcommand="
	xschem set netlist_type spice
	set lvs_ignore 1
	set lvs_netlist 1
	set spiceprefix 0
	set last_local_netlist_dir $local_netlist_dir
	set local_netlist_dir 0
	xschem netlist [xschem get current_name].cdl
	set local_netlist_dir $last_local_netlist_dir

"
}
C {ipin.sym} 1040 -800 2 1 {name=p2 lab=iep
}
C {opin.sym} 3200 -480 2 1 {name=p5 lab=op

}
C {simulator_commands_shown.sym} 640 -470 0 0 {name=COMMANDS1
simulator=none
only_toplevel=true 

value="tcleval(

pmos w/l = [set pw 2e-6]/[set pl 1e-6]
nmos w/l = [set nw 1e-6]/[set nl 1e-6]

rppd l/w b = [set rppdl 3e-6]/[set rppdw 1e-6] [set rppdb 3]

)"}
C {launcher.sym} 640 -640 0 0 {name=h2
descr="load OP from TOP"
tclcommand="
	xschem annotate_op $\{netlist_dir\}/[file rootname [file tail [xschem get schname 0]]].raw 0;
	xschem raw_read $\{netlist_dir\}/[file rootname [file tail [xschem get schname 0]]]_dc.raw 0;

"
}
C {pwroli.sym} 1840 -160 0 1 {name=l19 lab=VSS}
C {ammeter.sym} 1840 -190 0 1 {name=Vmeas17 savecurrent=true
lvs_ignore=short}
C {pwroli.sym} 2000 -1280 2 1 {name=l12 lab=VDD
}
C {ammeter.sym} 2000 -1250 0 1 {name=Vmeas3 savecurrent=true
lvs_ignore=short}
C {pwroli.sym} 1760 -1280 2 1 {name=l21 lab=VDD
}
C {ammeter.sym} 1760 -1250 0 1 {name=Vmeas19 savecurrent=true
lvs_ignore=short}
C {pwroli.sym} 1760 -160 0 1 {name=l22 lab=VSS}
C {ammeter.sym} 1760 -190 0 1 {name=Vmeas20 savecurrent=true
lvs_ignore=short}
C {capa.sym} 2120 -960 1 0 {name=C1
m=1
value=10f
footprint=1206
device="ceramic capacitor"
spice_ignore=true
}
C {npn13G2oli.sym} 1980 -640 0 0 {name=Q7
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {npn13G2oli.sym} 2260 -640 0 1 {name=Q8
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {pwroli.sym} 2240 -1280 2 1 {name=l9 lab=VDD
}
C {ammeter.sym} 2240 -1250 0 1 {name=Vmeas1 savecurrent=true
lvs_ignore=short}
C {launcher.sym} 1680 -1680 0 0 {name=h3
descr="write LVS netlist"
tclcommand="
	xschem set netlist_type spice
	set lvs_ignore 1
	set lvs_netlist 1
	set spiceprefix 0
	set last_local_netlist_dir $local_netlist_dir
	set local_netlist_dir 0
	xschem netlist [xschem get current_name].cdl
	set local_netlist_dir $last_local_netlist_dir

"
}
C {pwroli.sym} 1840 -1280 2 1 {name=l30 lab=VDD
}
C {ammeter.sym} 1840 -1250 0 1 {name=Vmeas28 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 2100 -320 0 0 {name=Q9
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {npn13G2oli.sym} 2020 -320 0 0 {name=Q5
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {npn13G2oli.sym} 2380 -1040 0 0 {name=Q3
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {npn13G2oli.sym} 2540 -960 0 0 {name=Q4
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {pwroli.sym} 2560 -1280 2 1 {name=l6 lab=VDD
}
C {ammeter.sym} 2560 -1250 0 1 {name=Vmeas6 savecurrent=true
lvs_ignore=short}
C {pwroli.sym} 2400 -1280 2 1 {name=l7 lab=VDD
}
C {ammeter.sym} 2400 -1250 0 1 {name=Vmeas7 savecurrent=true
lvs_ignore=short}
C {pwroli.sym} 2560 -160 0 0 {name=l8 lab=VSS}
C {ammeter.sym} 2560 -190 0 0 {name=Vmeas9 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 2540 -320 0 0 {name=Q10
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {pwroli.sym} 2720 -160 0 0 {name=l10 lab=VSS}
C {ammeter.sym} 2720 -190 0 0 {name=Vmeas10 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 2700 -320 0 0 {name=Q11
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {pwroli.sym} 2400 -160 0 1 {name=l13 lab=VSS}
C {ammeter.sym} 2400 -190 0 1 {name=Vmeas11 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 2420 -320 0 1 {name=Q12
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {npn13G2oli.sym} 1860 -320 0 1 {name=Q1
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {iopin.sym} 1040 -880 0 1 {name=p1 lab=vGND}
C {capa.sym} 1440 -850 0 0 {name=C3
m=1
value=1
footprint=1206
device="ceramic capacitor"
spice_ignore=true}
C {pwroli.sym} 1440 -820 0 1 {name=l2 lab=VSS
spice_ignore=true}
C {ngspice_probe.sym} 1760 -880 0 0 {name=r11
}
C {ngspice_probe.sym} 2120 -520 0 0 {name=r13
}
C {ngspice_probe.sym} 2000 -1040 0 0 {name=r14
}
C {ngspice_probe.sym} 2240 -960 0 0 {name=r16
}
C {ngspice_probe.sym} 2400 -370 0 0 {name=r17
}
C {ngspice_probe.sym} 2560 -370 0 0 {name=r18
}
C {ngspice_probe.sym} 2720 -380 0 0 {name=r19
}
C {ngspice_probe.sym} 2400 -800 0 0 {name=r20
}
C {ngspice_probe.sym} 2560 -800 0 0 {name=r21
}
C {launcher.sym} 1680 -1620 0 0 {name=h4
descr="xschem annotate_op"
tclcommand="
xschem raw_clear
xschem annotate_op $\{netlist_dir\}/$\{schematic\}_mos$\{mos_corner\}.spice.raw 0
"
}
C {launcher.sym} 1240 -1740 0 0 {
descr="xyce netlist simulate corners ALL" 

tclcommand="

    proc simulate_and_plot \{corners load_the_plots\} \{

	global netlist_dir
	global execute
	global mos_corner
	global sim_command
	global simulations

        set schematic [file rootname [file tail [xschem get schname 0]]]

        foreach corner $corners \{ 
            set mos_corner $\{corner\};
            foreach sim $simulations \{ 

                set sim_command $sim;

                if \{$\{sim\} == \{op\}\} \{
                    xschem netlist $\{netlist_dir\}/$\{schematic\}_mos$\{corner\}.spice
                \} else \{
                    xschem netlist $\{netlist_dir\}/$\{schematic\}_$\{sim\}_mos$\{corner\}.spice
                \}
            \}
        \}

        puts netlists_written;

        foreach corner $corners \{ 
            foreach sim $simulations \{

                if \{$\{sim\} == \{op\}\} \{
                    xschem set netlist_name $\{schematic\}_mos$\{corner\}.spice
                \} else \{
                    xschem set netlist_name $\{schematic\}_$\{sim\}_mos$\{corner\}.spice
                \}

                set id_$\{sim\}_$\{corner\} [simulate ]
            \}
        \}

        puts sims_started;

        while \{[llength [get_running_cmds]]\} \{

            puts -nonewline .; flush stdout;

            delay 99;
        \}

        if \{$\{load_the_plots\}\} \{
            xschem raw_clear;
            xschem annotate_op $\{netlist_dir\}/$\{schematic\}_mostt.spice.raw 0
        \}

        puts done

    \}


    xschem set netlist_type spice
    set lvs_ignore 0
    set lvs_netlist 0
    set spiceprefix 1

    simulate_and_plot $\{corners\} true
"
}
C {sg13g2_pr/rppd.sym} 1760 -400 2 0 {name=R2
w=1e-6
l=95.5e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 1760 -1120 2 0 {name=R3
w=1e-6
l=95.5e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 1600 -800 2 0 {name=R22
w=.7e-6
l=13e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 1680 -800 2 0 {name=R4
w=.7e-6
l=13e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2000 -560 2 0 {name=R5
w=1e-6
l=3.3e-6
model=rppd
spiceprefix=X
b=0
m=3
}
C {sg13g2_pr/rppd.sym} 2240 -560 2 0 {name=R10
w=1e-6
l=3.3e-6
model=rppd
spiceprefix=X
b=0
m=3
}
C {sg13g2_pr/rppd.sym} 2000 -1120 2 0 {name=R9
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=2
}
C {sg13g2_pr/rppd.sym} 2240 -1120 2 0 {name=R12
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=2
}
C {sg13g2_pr/rppd.sym} 2400 -640 0 0 {name=R6
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2560 -640 0 0 {name=R8
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2480 -720 0 0 {name=R7
w=1e-6
l=30.4e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {pwroli.sym} 2800 -160 0 0 {name=l11 lab=VSS}
C {ammeter.sym} 2800 -190 0 0 {name=Vmeas4 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 2780 -320 0 0 {name=Q2
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {ngspice_probe.sym} 2800 -380 0 0 {name=r15
}
C {pwroli.sym} 2880 -160 0 0 {name=l14 lab=VSS}
C {ammeter.sym} 2880 -190 0 0 {name=Vmeas5 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 2860 -320 0 0 {name=Q6
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {ngspice_probe.sym} 2880 -380 0 0 {name=r23
}
C {pwroli.sym} 2960 -160 0 0 {name=l15 lab=VSS}
C {ammeter.sym} 2960 -190 0 0 {name=Vmeas12 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 2940 -320 0 0 {name=Q13
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {ngspice_probe.sym} 2960 -380 0 0 {name=r24
}
C {pwroli.sym} 3040 -160 0 0 {name=l16 lab=VSS}
C {ammeter.sym} 3040 -190 0 0 {name=Vmeas13 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 3020 -320 0 0 {name=Q14
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {ngspice_probe.sym} 3040 -380 0 0 {name=r25
}
C {pwroli.sym} 3120 -160 0 0 {name=l17 lab=VSS}
C {ammeter.sym} 3120 -190 0 0 {name=Vmeas14 savecurrent=true
lvs_ignore=short}
C {npn13G2oli.sym} 3100 -320 0 0 {name=Q15
model=npn13G2
spiceprefix=X
Nx=1
le=900e-9
Sub=VSS}
C {ngspice_probe.sym} 3120 -380 0 0 {name=r26
}
C {sg13g2_pr/rppd.sym} 1840 -800 0 0 {name=R1
w=1e-6
l=210.1e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2020 -1160 0 0 {name=R27
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2260 -1150 0 0 {name=R28
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2020 -580 0 0 {name=R29
w=1e-6
l=3.3e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2260 -570 0 0 {name=R30
w=1e-6
l=3.3e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2460 -740 2 0 {name=R31
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 2720 -640 0 0 {name=R32
w=1e-6
l=15.2e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {ipin.sym} 1040 -560 0 0 {name=p4 lab=ien
}
C {ipin.sym} 1040 -640 2 1 {name=p6 lab=ihp
}
C {sg13g2_pr/rppd.sym} 1280 -800 3 0 {name=R33
w=6.6e-6
l=1e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 1280 -720 3 0 {name=R34
w=6.6e-6
l=1e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 1280 -560 1 0 {name=R35
w=6.6e-6
l=1e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {sg13g2_pr/rppd.sym} 1280 -640 1 0 {name=R36
w=6.6e-6
l=1e-6
model=rppd
spiceprefix=X
b=0
m=1
}
C {lab_pin.sym} 1520 -640 3 0 {name=p7 lab=in  net_name=true}
C {lab_pin.sym} 1520 -720 3 0 {name=p10 lab=ip  net_name=true}
